{"id":"tinyAgent-4sk","title":"Update tinyagent/memory/__init__.py exports","description":"## Summary\nUpdate the memory module exports to include new Step types and MemoryManager alongside existing AgentMemory.\n\n## Acceptance Criteria\n- [ ] Export Step, SystemPromptStep, TaskStep, ActionStep, ScratchpadStep from steps\n- [ ] Export MemoryManager from manager\n- [ ] Export pruning strategies: keep_last_n_steps, prune_old_observations, no_pruning\n- [ ] Export PruneStrategy type alias\n- [ ] Maintain existing AgentMemory export for backward compatibility\n- [ ] Update __all__ list with all exports\n\n## Files\n- tinyagent/memory/__init__.py (modify)\n\n## Notes\n- Check existing exports first to avoid breaking changes\n- Use explicit imports rather than star imports","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T15:22:10.746537142-06:00","updated_at":"2025-12-23T15:32:28.613483619-06:00","closed_at":"2025-12-23T15:32:28.613483619-06:00","close_reason":"All memory module exports updated, backward compatible","labels":["core"],"dependencies":[{"issue_id":"tinyAgent-4sk","depends_on_id":"tinyAgent-tv0","type":"blocks","created_at":"2025-12-23T15:22:10.748170218-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-8sm","title":"Integrate MemoryManager into ReactAgent","description":"## Summary\nReplace the raw message list in ReactAgent with MemoryManager for structured history tracking.\n\n## Acceptance Criteria\n- [ ] Add memory: MemoryManager | None = None parameter to ReactAgent dataclass\n- [ ] Add enable_pruning: bool = False parameter\n- [ ] Add prune_keep_last: int = 5 parameter\n- [ ] Auto-initialize memory in __post_init__ if None\n- [ ] Replace messages list initialization with memory.clear() + memory.add(SystemPromptStep, TaskStep)\n- [ ] Replace messages += [...] with memory.add(ActionStep(...))\n- [ ] Replace messages variable with memory.to_messages() for LLM calls\n- [ ] Apply pruning after each step when enable_pruning=True\n- [ ] Backward compatible: existing code without memory param works unchanged\n\n## Files\n- tinyagent/agents/react.py (modify lines 37-62, 107-186)\n\n## Notes\n- Import time for step timestamps\n- Import MemoryManager, Step types from tinyagent.memory\n- Preserve existing MAX_OBS_LEN truncation behavior in ActionStep","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T15:22:24.919988344-06:00","updated_at":"2025-12-23T15:33:37.280195133-06:00","closed_at":"2025-12-23T15:33:37.280195133-06:00","close_reason":"MemoryManager integrated into ReactAgent with backward compatibility","labels":["core"],"dependencies":[{"issue_id":"tinyAgent-8sm","depends_on_id":"tinyAgent-4sk","type":"blocks","created_at":"2025-12-23T15:22:24.921973926-06:00","created_by":"daemon"},{"issue_id":"tinyAgent-8sm","depends_on_id":"tinyAgent-fgd","type":"blocks","created_at":"2025-12-23T15:22:24.924761627-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-9hv","title":"Create memory system demo example","description":"## Summary\nCreate a demonstration script showing memory system usage with pruning strategies.\n\n## Acceptance Criteria\n- [ ] Create examples/memory_demo.py\n- [ ] Demo 1: Basic memory usage without pruning\n- [ ] Demo 2: Memory with keep_last_n_steps pruning\n- [ ] Demo 3: Memory with prune_old_observations strategy\n- [ ] Show step inspection via get_steps_by_type()\n- [ ] Display action_count property usage\n- [ ] Include comments explaining each feature\n- [ ] Script runs without errors\n\n## Files\n- examples/memory_demo.py (create)\n\n## Notes\n- Follow patterns from examples/simple_demo.py\n- Use real tool calls to generate ActionSteps\n- Print memory state before and after pruning","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T15:22:56.325020316-06:00","updated_at":"2025-12-23T15:37:00.822286604-06:00","closed_at":"2025-12-23T15:37:00.822286604-06:00","close_reason":"Memory demo with 5 demonstrations of all features","labels":["docs"],"dependencies":[{"issue_id":"tinyAgent-9hv","depends_on_id":"tinyAgent-8sm","type":"blocks","created_at":"2025-12-23T15:22:56.327488095-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-bbe","title":"Create Step type hierarchy in tinyagent/memory/steps.py","description":"## Summary\nCreate the core Step dataclass hierarchy with polymorphic to_messages() methods.\n\n## Acceptance Criteria\n- [ ] Base Step dataclass with timestamp and step_number fields\n- [ ] SystemPromptStep with content field, returns system message\n- [ ] TaskStep with task field, returns user message\n- [ ] ActionStep with thought, tool_name, tool_args, observation, error, is_final, raw_llm_response\n- [ ] ActionStep.truncate() method for observation truncation\n- [ ] ScratchpadStep for working memory notes\n- [ ] All step types have to_messages() returning list[dict[str, str]]\n\n## Files\n- tinyagent/memory/steps.py (create)\n\n## Notes\n- Use @dataclass decorator with field(default_factory=...) patterns\n- Follow existing type hint patterns from codebase\n- Import time for timestamp defaults","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T15:21:06.563954441-06:00","updated_at":"2025-12-23T15:28:17.536444488-06:00","closed_at":"2025-12-23T15:28:17.536444488-06:00","close_reason":"Step type hierarchy implemented with all required types and methods","labels":["core","setup"]}
{"id":"tinyAgent-dw0","title":"Integrate MemoryManager into TinyCodeAgent","description":"## Summary\nAdd MemoryManager to TinyCodeAgent, using memory_manager as the attribute name to avoid collision with existing memory (AgentMemory) attribute.\n\n## Acceptance Criteria\n- [ ] Add memory_manager: MemoryManager | None = None parameter\n- [ ] Add enable_pruning: bool = False parameter\n- [ ] Add prune_keep_last: int = 5 parameter\n- [ ] Auto-initialize memory_manager in __post_init__ if None\n- [ ] Replace messages list with memory_manager step operations\n- [ ] Existing memory (AgentMemory scratchpad) remains unchanged\n- [ ] Apply pruning when enabled\n- [ ] Backward compatible: existing code works unchanged\n\n## Files\n- tinyagent/agents/code.py (modify lines 30-70, 215-308)\n\n## Notes\n- Use memory_manager to avoid naming collision with existing memory attribute\n- The existing memory (AgentMemory) serves different purpose (scratchpad)\n- Follow same pattern as ReactAgent integration","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T15:22:33.998660014-06:00","updated_at":"2025-12-23T15:34:56.916264217-06:00","closed_at":"2025-12-23T15:34:56.916264217-06:00","close_reason":"MemoryManager integrated into TinyCodeAgent with memory_manager attribute","labels":["core"],"dependencies":[{"issue_id":"tinyAgent-dw0","depends_on_id":"tinyAgent-8sm","type":"blocks","created_at":"2025-12-23T15:22:34.001625228-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-fgd","title":"Write unit tests for MemoryManager","description":"## Summary\nCreate comprehensive unit tests for MemoryManager and pruning strategies.\n\n## Acceptance Criteria\n- [ ] TestMemoryManager testing add(), to_messages(), clear()\n- [ ] TestMemoryManager testing get_steps_by_type() filtering\n- [ ] TestMemoryManager testing action_count property\n- [ ] TestKeepLastNSteps testing critical step preservation\n- [ ] TestPruneOldObservations testing observation truncation for old steps\n- [ ] TestNoPruning testing identity behavior\n- [ ] Contrastive tests: pruned vs unpruned state comparisons\n- [ ] Integration test: full workflow with multiple step types\n\n## Files\n- tests/test_memory_manager.py (create)\n\n## Notes\n- Follow patterns from tests/test_base_agent.py\n- Create test fixtures with multiple step types\n- Verify step ordering after pruning","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T15:21:45.657806885-06:00","updated_at":"2025-12-23T15:31:51.291715437-06:00","closed_at":"2025-12-23T15:31:51.291715437-06:00","close_reason":"18 unit tests for MemoryManager and pruning, all passing","labels":["test"],"dependencies":[{"issue_id":"tinyAgent-fgd","depends_on_id":"tinyAgent-tv0","type":"blocks","created_at":"2025-12-23T15:21:45.659727751-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-hty","title":"Update main tinyagent/__init__.py exports","description":"## Summary\nExport MemoryManager and Step types from the main tinyagent package for user convenience.\n\n## Acceptance Criteria\n- [ ] Export MemoryManager from tinyagent.memory\n- [ ] Export Step, SystemPromptStep, TaskStep, ActionStep, ScratchpadStep\n- [ ] Export PruneStrategy type alias\n- [ ] Export pruning strategy functions\n- [ ] Update __all__ list\n- [ ] Verify imports work: from tinyagent import MemoryManager, ActionStep\n\n## Files\n- tinyagent/__init__.py (modify)\n\n## Notes\n- Add to existing exports, don't replace\n- Keep import structure clean","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T15:22:44.85961777-06:00","updated_at":"2025-12-23T15:35:42.543348198-06:00","closed_at":"2025-12-23T15:35:42.543348198-06:00","close_reason":"All memory types exported from main tinyagent package","labels":["core"],"dependencies":[{"issue_id":"tinyAgent-hty","depends_on_id":"tinyAgent-4sk","type":"blocks","created_at":"2025-12-23T15:22:44.86119382-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-tv0","title":"Create MemoryManager and pruning strategies in tinyagent/memory/manager.py","description":"## Summary\nCreate the MemoryManager class that stores steps and provides pruning strategies.\n\n## Acceptance Criteria\n- [ ] MemoryManager dataclass with steps: list[Step]\n- [ ] add(step: Step) method to append steps\n- [ ] to_messages() method aggregating all step messages\n- [ ] prune(strategy: PruneStrategy) method to apply pruning\n- [ ] get_steps_by_type(step_type) method for filtering\n- [ ] clear() method to reset steps\n- [ ] action_count property for counting ActionSteps\n- [ ] PruneStrategy type alias: Callable[[list[Step]], list[Step]]\n- [ ] keep_last_n_steps(n) strategy preserving SystemPromptStep and TaskStep\n- [ ] prune_old_observations(keep_last_n, max_length) strategy\n- [ ] no_pruning() strategy (identity function)\n\n## Files\n- tinyagent/memory/manager.py (create)\n\n## Notes\n- Import Step types from steps.py\n- Use isinstance checks for type filtering\n- Pruning strategies are factory functions returning callables","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-23T15:21:19.184950759-06:00","updated_at":"2025-12-23T15:29:21.865367979-06:00","closed_at":"2025-12-23T15:29:21.865367979-06:00","close_reason":"MemoryManager implemented with all pruning strategies","labels":["core","setup"],"dependencies":[{"issue_id":"tinyAgent-tv0","depends_on_id":"tinyAgent-bbe","type":"blocks","created_at":"2025-12-23T15:21:19.187032425-06:00","created_by":"daemon"}]}
{"id":"tinyAgent-xys","title":"Write unit tests for Step types","description":"## Summary\nCreate comprehensive unit tests for all Step type classes following existing test patterns.\n\n## Acceptance Criteria\n- [ ] TestStep class testing base Step initialization and defaults\n- [ ] TestSystemPromptStep testing to_messages() output format\n- [ ] TestTaskStep testing to_messages() output format\n- [ ] TestActionStep testing to_messages() with observation vs error cases\n- [ ] TestActionStep testing truncate() method behavior\n- [ ] TestScratchpadStep testing to_messages() dual message output\n- [ ] Contrastive tests: valid vs invalid step configurations\n- [ ] All tests use -\u003e None type hints\n\n## Files\n- tests/test_memory_steps.py (create)\n\n## Notes\n- Follow patterns from tests/test_base_agent.py\n- No mocking required - direct instantiation\n- Use pytest.raises for error cases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T15:21:31.512835562-06:00","updated_at":"2025-12-23T15:30:30.351342523-06:00","closed_at":"2025-12-23T15:30:30.351342523-06:00","close_reason":"23 unit tests for Step types, all passing","labels":["test"],"dependencies":[{"issue_id":"tinyAgent-xys","depends_on_id":"tinyAgent-bbe","type":"blocks","created_at":"2025-12-23T15:21:31.514504879-06:00","created_by":"daemon"}]}
